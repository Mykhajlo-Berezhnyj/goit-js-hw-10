{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport 'flatpickr/dist/themes/material_blue.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport iconError from '../img/error.svg';\nimport iconCaution from '../img/caution.svg';\nimport iconHello from '../img/hello.svg';\n\nlet userSelectedDate;\nlet interval;\nlet newInterval;\nlet isRunning = false;\nconst timer = document.querySelector('.timer');\nconst startButton = document.querySelector('button[data-start]');\nconst inputData = document.getElementById('datetime-picker');\nconst day = document.querySelector('span[data-days]');\nconst hour = document.querySelector('span[data-hours]');\nconst minute = document.querySelector('span[data-minutes]');\nconst second = document.querySelector('span[data-seconds]');\n\nsetTimeout(() => {\n  iziToast.show({\n    title: 'Hello',\n    message: 'Welcome to Timer!',\n    titleColor: '#FFFFFF',\n    messageColor: '#FFFFFF',\n    position: 'bottomRight',\n    backgroundColor: '#0099FF',\n    iconUrl: iconHello,\n  });\n}, 1000);\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onChange(selectedDates) {\n    userSelectedDate = selectedDates[0];\n    if (userSelectedDate && userSelectedDate <= new Date()) {\n      startButton.setAttribute('disabled', 'true');\n      console.log(\n        '–Ω–∞ –º–æ—é –¥—É–º–∫—É onChange —Ç—É—Ç —î –∫—Ä–∞—â–∏–º —Ä—ñ—à–µ–Ω–Ω—è–º, –≤—ñ–Ω –≤—ñ–¥—Ä–∞–∑—É –ø—Ä–∏ –≤–∏–±–æ—Ä—ñ –¥–∞—Ç–∏ –¥–∞—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫—É, —à–≤–∏–¥—à–∞ –≤–∑–∞—î–º–æ–¥—ñ—è –∑ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º –≤—ñ–Ω –∑—Ä–∞–∑—É –±–∞—á–∏—Ç—å —â–æ –¥–∞—Ç–∞ –≤–∏–±—Ä–∞–Ω–∞ –Ω–µ –≤—ñ—Ä–Ω–æ, –Ω–µ –∑–∞–∫—Ä–∏–≤–∞—é—á–∏ –∫–∞–ª–µ–Ω–¥–∞—Ä '\n      );\n      iziToast.show({\n        title: 'Error!',\n        message: 'Please choose a date in the future',\n        titleColor: '#FFFFFF',\n        messageColor: '#FFFFFF',\n        position: 'topRight',\n        backgroundColor: '#EF4040',\n        position: 'topRight',\n        iconUrl: iconError,\n      });\n    }\n  },\n  onClose(selectedDates) {\n    console.log(selectedDates[0]);\n    userSelectedDate = selectedDates[0];\n    // console.log('üöÄ ~ onClose ~ userSelectedDate:', userSelectedDate);\n    if (userSelectedDate && userSelectedDate <= new Date()) {\n      startButton.setAttribute('disabled', 'true');\n      console.log(\n        '–¢—É—Ç –≤–∂–µ, —è–∫—â–æ –≤—Å–µ –∂ —Ç–∞–∫–∏ —è–∫–∏–π—Å—å –Ω–∞—Å—Ç–∏—Ä–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–∏–±–µ—Ä–µ –≤—Å–µ –∂ —Ç–∞–∫–∏ —Å—Ç–∞—Ä—É –¥–∞—Ç—É, –¥–æ–¥–∞–≤ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ –∫–Ω–æ–ø–∫–æ—é. –ø—Ä–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—ñ –Ω–∞ —è–∫—É –ø–µ—Ä–µ–º–∏–∫–∞—î–º–æ—Å—è –≤ —Ä–µ–∂–∏–º –≤—ñ–¥–ª—ñ–∫—É –ø–µ—Ä—ñ–æ–¥—É —á–∞—Å—É, —Å–∫—ñ–ª—å–∫–∏ –ø—Ä–æ–π—à–ª–æ –∑ –ø–∞–º—è—Ç–Ω–æ—ó –¥–ª—è –Ω—å–æ–≥–æ –¥–∞—Ç–∏ :) '\n      );\n      iziToast.show({\n        title: 'Warning!',\n        message:\n          '–í–∏ –≤–∏–±—Ä–∞–ª–∏ –¥–∞—Ç—É –≤ –º–∏–Ω—É–ª–æ–º—É, –±–∞–∂–∞—î—Ç–µ –¥—ñ–∑–Ω–∞—Ç–∏—Å—è —Å–∫—ñ–ª—å–∫–∏ —á–∞—Å—É –º–∏–Ω—É–ª–æ –≤—ñ–¥ —Ü—ñ—î—ó –¥–∞—Ç–∏?',\n        titleColor: '#0000FF',\n        messageColor: '#0000FF',\n        position: 'center',\n        backgroundColor: '#FFA000',\n        layout: 2,\n        iconUrl: iconCaution,\n        buttons: [\n          [\n            '<button class=\"btn\">OK</button>',\n            function (instance, toast) {\n              startButton.removeAttribute('disabled');\n              instance.hide({ transitionOut: 'fadeOut' }, toast);\n            },\n          ],\n        ],\n      });\n    } else {\n      startButton.removeAttribute('disabled');\n    }\n  },\n};\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  flatpickr('#datetime-picker', options);\n});\n\nstartButton.addEventListener('click', dataTimer);\n\nfunction dataTimer() {\n  if (isRunning) {\n    console.log('üöÄ ~ dataTimer ~ isRunning:', isRunning);\n    resetTimer();\n    return;\n  }\n  if (!userSelectedDate) {\n    return;\n  }\n  inputData.disabled = true;\n  const currentDate = new Date();\n  let differenceData = userSelectedDate - currentDate;\n  if (differenceData > 0) {\n    startButton.setAttribute('disabled', 'true');\n  } else {\n    startButton.textContent = 'Stop';\n  }\n  isRunning = true;\n\n  interval = setInterval(() => {\n    const currentDate = new Date();\n    newInterval = userSelectedDate - currentDate;\n    if (newInterval <= 0 && differenceData > 0) {\n      clearInterval(interval);\n      differenceData = 0;\n      inputData.disabled = false;\n      timer.querySelectorAll('.value, .label').forEach(element => {\n        element.classList.remove('active');\n        isRunning = false;\n      });\n      defaultDate: new Date();\n      iziToast.show({\n        title: 'Warning!',\n        message: '–ß–∞—Å –¥–æ –¥–∞–Ω–æ—ó –ø–æ–¥—ñ—ó –º–∏–Ω—É–≤!',\n        titleColor: '#bd34fe',\n        messageColor: '#25acda',\n        position: 'center',\n        backgroundColor: '#d4cec7f3',\n      });\n      return;\n    }\n    if (differenceData < 0) {\n      newInterval = -newInterval;\n    }\n    displayData();\n  }, 1000);\n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\n//console.log(convertMs(2000)); // {days: 0, hours: 0, minutes: 0, seconds: 2}\n//console.log(convertMs(140000)); // {days: 0, hours: 0, minutes: 2, seconds: 20}\n//console.log(convertMs(24140000)); // {days: 0, hours: 6 minutes: 42, seconds: 20}\n\nfunction addLeadingZero(value) {\n  return value.toString().padStart(2, '0');\n}\n\nfunction displayData(value) {\n  timer.querySelectorAll('.value, .label').forEach(element => {\n    element.classList.add('active');\n  });\n  const timeInterval = convertMs(newInterval);\n  day.textContent = addLeadingZero(timeInterval.days);\n  hour.textContent = addLeadingZero(timeInterval.hours);\n  minute.textContent = addLeadingZero(timeInterval.minutes);\n  second.textContent = addLeadingZero(timeInterval.seconds);\n}\n\nfunction resetTimer() {\n  day.textContent = '00';\n  hour.textContent = '00';\n  minute.textContent = '00';\n  second.textContent = '00';\n  userSelectedDate = null;\n  newInterval = 0;\n  isRunning = false;\n  startButton.textContent = 'Start';\n  inputData.disabled = false;\n  clearInterval(interval);\n  startButton.setAttribute('disabled', 'true');\n  timer.querySelectorAll('.value, .label').forEach(element => {\n    element.classList.remove('active');\n  });\n}\n"],"names":["userSelectedDate","interval","newInterval","isRunning","timer","startButton","inputData","day","hour","minute","second","iziToast","iconHello","options","selectedDates","iconError","iconCaution","instance","toast","flatpickr","dataTimer","resetTimer","differenceData","element","displayData","convertMs","ms","days","hours","minutes","seconds","addLeadingZero","value","timeInterval"],"mappings":"wJAUA,IAAIA,EACAC,EACAC,EACAC,EAAY,GAChB,MAAMC,EAAQ,SAAS,cAAc,QAAQ,EACvCC,EAAc,SAAS,cAAc,oBAAoB,EACzDC,EAAY,SAAS,eAAe,iBAAiB,EACrDC,EAAM,SAAS,cAAc,iBAAiB,EAC9CC,EAAO,SAAS,cAAc,kBAAkB,EAChDC,EAAS,SAAS,cAAc,oBAAoB,EACpDC,EAAS,SAAS,cAAc,oBAAoB,EAE1D,WAAW,IAAM,CACfC,EAAS,KAAK,CACZ,MAAO,QACP,QAAS,oBACT,WAAY,UACZ,aAAc,UACd,SAAU,cACV,gBAAiB,UACjB,QAASC,CACb,CAAG,CACH,EAAG,GAAI,EAEP,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,SAASC,EAAe,CACtBd,EAAmBc,EAAc,CAAC,EAC9Bd,GAAoBA,GAAoB,IAAI,OAC9CK,EAAY,aAAa,WAAY,MAAM,EAC3C,QAAQ,IACN,2MACR,EACMM,EAAS,KAAK,CACZ,MAAO,SACP,QAAS,qCACT,WAAY,UACZ,aAAc,UACd,SAAU,WACV,gBAAiB,UACjB,SAAU,WACV,QAASI,CACjB,CAAO,EAEJ,EACD,QAAQD,EAAe,CACrB,QAAQ,IAAIA,EAAc,CAAC,CAAC,EAC5Bd,EAAmBc,EAAc,CAAC,EAE9Bd,GAAoBA,GAAoB,IAAI,MAC9CK,EAAY,aAAa,WAAY,MAAM,EAC3C,QAAQ,IACN,kOACR,EACMM,EAAS,KAAK,CACZ,MAAO,WACP,QACE,mFACF,WAAY,UACZ,aAAc,UACd,SAAU,SACV,gBAAiB,UACjB,OAAQ,EACR,QAASK,EACT,QAAS,CACP,CACE,kCACA,SAAUC,EAAUC,EAAO,CACzBb,EAAY,gBAAgB,UAAU,EACtCY,EAAS,KAAK,CAAE,cAAe,SAAW,EAAEC,CAAK,CAClD,CACF,CACF,CACT,CAAO,GAEDb,EAAY,gBAAgB,UAAU,CAEzC,CACH,EAEA,SAAS,iBAAiB,mBAAoB,UAAY,CACxDc,EAAU,mBAAoBN,CAAO,CACvC,CAAC,EAEDR,EAAY,iBAAiB,QAASe,CAAS,EAE/C,SAASA,GAAY,CACnB,GAAIjB,EAAW,CACb,QAAQ,IAAI,8BAA+BA,CAAS,EACpDkB,IACA,MACD,CACD,GAAI,CAACrB,EACH,OAEFM,EAAU,SAAW,GAErB,IAAIgB,EAAiBtB,EADD,IAAI,KAEpBsB,EAAiB,EACnBjB,EAAY,aAAa,WAAY,MAAM,EAE3CA,EAAY,YAAc,OAE5BF,EAAY,GAEZF,EAAW,YAAY,IAAM,CAG3B,GADAC,EAAcF,EADM,IAAI,KAEpBE,GAAe,GAAKoB,EAAiB,EAAG,CAC1C,cAAcrB,CAAQ,EACtBqB,EAAiB,EACjBhB,EAAU,SAAW,GACrBF,EAAM,iBAAiB,gBAAgB,EAAE,QAAQmB,GAAW,CAC1DA,EAAQ,UAAU,OAAO,QAAQ,EACjCpB,EAAY,EACpB,CAAO,EAEDQ,EAAS,KAAK,CACZ,MAAO,WACP,QAAS,4BACT,WAAY,UACZ,aAAc,UACd,SAAU,SACV,gBAAiB,WACzB,CAAO,EACD,MACD,CACGW,EAAiB,IACnBpB,EAAc,CAACA,GAEjBsB,GACD,EAAE,GAAI,CACT,CAEA,SAASC,EAAUC,EAAI,CAQrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAMA,SAASC,EAAeC,EAAO,CAC7B,OAAOA,EAAM,SAAU,EAAC,SAAS,EAAG,GAAG,CACzC,CAEA,SAASR,EAAYQ,EAAO,CAC1B5B,EAAM,iBAAiB,gBAAgB,EAAE,QAAQmB,GAAW,CAC1DA,EAAQ,UAAU,IAAI,QAAQ,CAClC,CAAG,EACD,MAAMU,EAAeR,EAAUvB,CAAW,EAC1CK,EAAI,YAAcwB,EAAeE,EAAa,IAAI,EAClDzB,EAAK,YAAcuB,EAAeE,EAAa,KAAK,EACpDxB,EAAO,YAAcsB,EAAeE,EAAa,OAAO,EACxDvB,EAAO,YAAcqB,EAAeE,EAAa,OAAO,CAC1D,CAEA,SAASZ,GAAa,CACpBd,EAAI,YAAc,KAClBC,EAAK,YAAc,KACnBC,EAAO,YAAc,KACrBC,EAAO,YAAc,KACrBV,EAAmB,KACnBE,EAAc,EACdC,EAAY,GACZE,EAAY,YAAc,QAC1BC,EAAU,SAAW,GACrB,cAAcL,CAAQ,EACtBI,EAAY,aAAa,WAAY,MAAM,EAC3CD,EAAM,iBAAiB,gBAAgB,EAAE,QAAQmB,GAAW,CAC1DA,EAAQ,UAAU,OAAO,QAAQ,CACrC,CAAG,CACH"}